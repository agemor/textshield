<!DOCTYPE HTML>
<html>

<head>
  <title>TextShield Demo</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
  <link rel="stylesheet" href="assets/css/main.css" />
  <script src="./textshield.js"></script>
  <!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
</head>

<body>

  <section id="banner">
    <div class="inner split">
      <section>
        <img src="images/textshield-logo.png" class="title-logo" />
        <span>
          <h2>Text<shield mode="distort">Dwj9nF31N5DOEpu15YwVmm5I4/IEPS0mG4yc6lQUdegO5thLEHZKEASMv/s=Y1kcFSkr</shield>
            1.0</h2>
          <p>TextShield protects sensitive information aganist unwanted web crawlers/scrapers.</p>
        </span>
      </section>
    </div>
  </section>

  <section id="one" class="wrapper">
    <div class="inner split">
      <section>
        <h2>Encoder</h2>
        <p>To protect, encode desired text and replace the text in your webpage with the result below. Just don't
          forget to include
          <code>textshield.js</code>
          at
          the top!</p>

        <form action="#" class="alt" method="POST">


          <label><input type="radio" name="mode" value="plain" /> Plain</label>
          <label><input type="radio" name="mode" value="normal" /> Normal</label>
          <label><input type="radio" name="mode" value="distort" checked='checked' /> Distort</label>

          <div class="row uniform">
            <div class="8u">

              <input id="input" placeholder="Input text here" type="text">
            </div>
            <div class="4u$">
              <input id="cost" placeholder="Decode cost" type="text" value="1">
            </div>
            <div class="12u$">
              <textarea id="output" placeholder="Protected text" rows="4"></textarea>
            </div>
          </div>
          <ul class="actions">
            <li><input id="encode" class="alt" value="Encode" type="button"></li>
          </ul>
        </form>


        <h2 style="margin-top: 100px">Decoder</h2>
        <p>Original text can be retrieved upon Proof of Work (PoW).</p>

        <form action="#" class="alt" method="POST">

          <div class="row uniform">
            <div class="12u$">
              <input id="dinput" placeholder="Encoded text" type="text">
            </div>
            <div class="12u$">
              <textarea id="doutput" placeholder="Original text" rows="4"></textarea>
              <p id="time">Elapsed time: 0 sec</p>
            </div>
          </div>
          <ul class="actions">
            <li><input id="decode" class="alt" value="Decode" type="button"></li>
          </ul>
        </form>
		  
		  <h2 style="margin-top: 100px">Renderer</h2>
        <p>Input protected result to view rendererd result</p>

        <form action="#" class="alt" method="POST">

          <div class="row uniform">
            <div class="12u$">
              <input id="rinput" placeholder="Encoded text" type="text">
				<h2 id="routput">
				</h2>
				</div>
            </div>
                     </div>
          <ul class="actions">
            <li><input id="render" class="alt" value="Render" type="button"></li>
          </ul>
        </form>


      </section>
      <section>
        <h2>Text Rendering</h2>
        <ul class="checklist">
          <li>Lightweight JavaScript library (~15KB)</li>
          <li>Seamless integration with HTML</li>
          <li>PoW based decode protection</li>
          <li>Three text rendering modes: <br /><code><shield mode="plain">CRbMCzO4cWYl5pMNuZCydzlBKf7YWtiCcQs01bJscx5qTNQrFXqK2dqFAnk=YAIMOXs=</shield></code>,
            <code><shield mode="normal">sskTormkjEymov006MyAWy1O0sGB/b53/T0KNrPjszDTbpZx7sjEkilpweA=fn9iOy4h</shield></code>
            and
            <code><shield mode="distort">lESWjzxfHoBn0H/VEGveeQjOt8ObWKkqC3P9ExV2S+KDAXnG6OypCAZR3KY=dB98HH88Fg==</shield></code>
            (Try it yourself!)
          </li>
          <li>Support server-side textshield encoding library (Node.js and PHP)</li>
        </ul>
      </section>
    </div>
  </section>

  <!-- Footer -->
  <footer id="footer">
    <div class="copyright">
      Contributers: <a href="https://github.com/agemor">@agemor</a> | Design: <a href="http://templated.co">TEMPLATED</a>.
    </div>
  </footer>


  <script>
    document.getElementById("encode").onclick = function () {
      var cost = Number(document.getElementById("cost").value);
      var input = document.getElementById("input");
      var output = document.getElementById("output");

      if (input.value.length < 1) {
        alert("Input text");
        return;
      }

      window.TextShieldEncoder.decodeCost = cost;

      var modeLabel = document.getElementsByName("mode");
      var selectedMode = "";
      for (i = 0; i < modeLabel.length; i++) {
        if (modeLabel[i].checked) {
          selectedMode = modeLabel[i].value;
        }
      }

      output.value = "<shield mode=\"" + selectedMode + "\">" + window.TextShieldEncoder.encode(input.value, true) + "</shield>";
    }

    document.getElementById("decode").onclick = function () {
      var input = document.getElementById("dinput");
      var output = document.getElementById("doutput");
      var edd = document.getElementById("time");
      if (input.value.length < 1) {
        alert("Input text");
        return;
      }

      if (input.value.indexOf(">") >= 0) {
        input.value = input.value.split(">")[1].split("<")[0].trim();
      }

      var message = window.TextShieldEncodedMessage.parse(input.value);
      var start = new Date().getTime();

      var originalMessage = window.TextShieldDecoder.decode(message);
      var elapsed = new Date().getTime() - start;

      output.value = originalMessage != "" ? originalMessage : "PoW too high";

      edd.innerHTML = "Elapsed time: " + (elapsed * elapsed);
    }
	
	document.getElementById("render").onclick = function () {
      var input = document.getElementById("rinput");
      var output = document.getElementById("routput");
      if (input.value.length < 1) {
        alert("Input text");
        return;
      }

      output.innerHTML = input.value;
		input.value = "";
		console.log("sdsd")
		window.TextShieldLoad();
		console.log("sdsd")
		
    }

  </script>

</body>

</html>